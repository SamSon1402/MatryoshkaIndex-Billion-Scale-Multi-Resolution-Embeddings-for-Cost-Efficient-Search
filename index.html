<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MatryoshkaIndex | Billion-Scale Multi-Resolution Embeddings | Linkup</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ec4899;
            --primary-glow: rgba(236, 72, 153, 0.4);
            --secondary: #8b5cf6;
            --accent: #06b6d4;
            --tertiary: #f59e0b;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-dark: #09090b;
            --bg-card: #18181b;
            --bg-elevated: #27272a;
            --text-primary: #fafafa;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --border: #3f3f46;
            --matryoshka-gradient: linear-gradient(135deg, #ec4899 0%, #8b5cf6 40%, #06b6d4 70%, #f59e0b 100%);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            background-image: 
                radial-gradient(ellipse at 0% 0%, rgba(236, 72, 153, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 100% 50%, rgba(139, 92, 246, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 100%, rgba(6, 182, 212, 0.06) 0%, transparent 50%);
        }

        .header {
            background: linear-gradient(180deg, rgba(236, 72, 153, 0.06) 0%, transparent 100%);
            border-bottom: 1px solid var(--border);
            padding: 0.75rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(20px);
        }

        .header-content {
            max-width: 1900px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: var(--matryoshka-gradient);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 0 30px var(--primary-glow);
        }

        .logo-text {
            font-size: 1.6rem;
            font-weight: 800;
            background: var(--matryoshka-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo-subtitle {
            font-size: 0.6rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        .header-badges {
            display: flex;
            gap: 0.5rem;
        }

        .badge {
            background: var(--bg-card);
            border: 1px solid var(--border);
            padding: 0.4rem 0.8rem;
            border-radius: 8px;
            font-size: 0.7rem;
            color: var(--text-secondary);
            font-family: 'JetBrains Mono', monospace;
        }

        .badge.live {
            background: rgba(236, 72, 153, 0.15);
            border-color: var(--primary);
            color: var(--primary);
        }

        .badge.live::before {
            content: '';
            display: inline-block;
            width: 6px;
            height: 6px;
            background: var(--primary);
            border-radius: 50%;
            margin-right: 6px;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .main {
            max-width: 1900px;
            margin: 0 auto;
            padding: 1.5rem 2rem;
        }

        .hero {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .hero h1 {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 0.4rem;
            background: var(--matryoshka-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            color: var(--text-secondary);
            font-size: 1rem;
            max-width: 750px;
            margin: 0 auto;
        }

        .workspace {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 1.25rem;
        }

        @media (max-width: 1400px) {
            .workspace { grid-template-columns: 1fr; }
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
        }

        .card-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(180deg, rgba(39, 39, 42, 0.8) 0%, transparent 100%);
        }

        .card-title {
            font-size: 0.95rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-body { padding: 1.25rem; }

        /* Matryoshka Visualization */
        .matryoshka-viz {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            margin-bottom: 1rem;
            background: var(--bg-elevated);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }

        .matryoshka-dolls {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .doll {
            position: absolute;
            border-radius: 50% 50% 45% 45%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .doll:hover {
            transform: scale(1.05);
        }

        .doll.d1536 {
            width: 200px;
            height: 220px;
            background: linear-gradient(180deg, rgba(236, 72, 153, 0.3) 0%, rgba(236, 72, 153, 0.1) 100%);
            border: 3px solid var(--primary);
            box-shadow: 0 0 40px var(--primary-glow);
        }

        .doll.d768 {
            width: 150px;
            height: 165px;
            background: linear-gradient(180deg, rgba(139, 92, 246, 0.3) 0%, rgba(139, 92, 246, 0.1) 100%);
            border: 3px solid var(--secondary);
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.3);
        }

        .doll.d256 {
            width: 100px;
            height: 110px;
            background: linear-gradient(180deg, rgba(6, 182, 212, 0.3) 0%, rgba(6, 182, 212, 0.1) 100%);
            border: 3px solid var(--accent);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
        }

        .doll.d64 {
            width: 50px;
            height: 55px;
            background: linear-gradient(180deg, rgba(245, 158, 11, 0.4) 0%, rgba(245, 158, 11, 0.2) 100%);
            border: 3px solid var(--tertiary);
            box-shadow: 0 0 15px rgba(245, 158, 11, 0.3);
        }

        .doll-label {
            font-size: 0.7rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .doll.d64 .doll-label { font-size: 0.5rem; }

        /* Dimension Selector */
        .dimension-selector {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            justify-content: center;
        }

        .dim-btn {
            padding: 0.6rem 1.2rem;
            background: var(--bg-elevated);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: var(--text-secondary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .dim-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .dim-btn.active {
            background: rgba(236, 72, 153, 0.2);
            border-color: var(--primary);
            color: var(--primary);
        }

        .dim-btn.d768.active {
            background: rgba(139, 92, 246, 0.2);
            border-color: var(--secondary);
            color: var(--secondary);
        }

        .dim-btn.d256.active {
            background: rgba(6, 182, 212, 0.2);
            border-color: var(--accent);
            color: var(--accent);
        }

        .dim-btn.d64.active {
            background: rgba(245, 158, 11, 0.2);
            border-color: var(--tertiary);
            color: var(--tertiary);
        }

        /* Search Interface */
        .search-section {
            background: var(--bg-elevated);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .search-input-container {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .search-input {
            flex: 1;
            padding: 0.85rem 1rem;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .search-btn {
            padding: 0.85rem 1.5rem;
            background: var(--matryoshka-gradient);
            border: none;
            border-radius: 10px;
            color: white;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        /* Phased Ranking Display */
        .phases-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .phase-card {
            background: var(--bg-dark);
            border-radius: 10px;
            padding: 1rem;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }

        .phase-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
        }

        .phase-card.phase1::before { background: var(--tertiary); }
        .phase-card.phase2::before { background: var(--accent); }
        .phase-card.phase3::before { background: var(--primary); }

        .phase-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .phase-title {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .phase-card.phase1 .phase-title { color: var(--tertiary); }
        .phase-card.phase2 .phase-title { color: var(--accent); }
        .phase-card.phase3 .phase-title { color: var(--primary); }

        .phase-time {
            font-size: 0.65rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }

        .phase-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
        }

        .phase-stat {
            text-align: center;
            padding: 0.5rem;
            background: var(--bg-elevated);
            border-radius: 6px;
        }

        .phase-stat-value {
            font-size: 1rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
        }

        .phase-card.phase1 .phase-stat-value { color: var(--tertiary); }
        .phase-card.phase2 .phase-stat-value { color: var(--accent); }
        .phase-card.phase3 .phase-stat-value { color: var(--primary); }

        .phase-stat-label {
            font-size: 0.55rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        /* Results List */
        .results-section {
            background: var(--bg-elevated);
            border-radius: 12px;
            padding: 1rem;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .results-title {
            font-size: 0.85rem;
            font-weight: 600;
        }

        .results-count {
            font-size: 0.7rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }

        .result-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-dark);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            border: 1px solid transparent;
            transition: all 0.3s;
        }

        .result-item:hover {
            border-color: var(--primary);
        }

        .result-rank {
            width: 28px;
            height: 28px;
            background: var(--matryoshka-gradient);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            color: white;
        }

        .result-content { flex: 1; }

        .result-title {
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 0.2rem;
        }

        .result-meta {
            font-size: 0.65rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }

        .result-scores {
            display: flex;
            gap: 0.3rem;
        }

        .result-score {
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-size: 0.6rem;
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
        }

        .result-score.cosine {
            background: rgba(236, 72, 153, 0.2);
            color: var(--primary);
        }

        .result-score.bm25 {
            background: rgba(139, 92, 246, 0.2);
            color: var(--secondary);
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .control-btn {
            flex: 1;
            padding: 0.85rem;
            background: var(--bg-elevated);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .control-btn:hover {
            border-color: var(--primary);
            background: rgba(236, 72, 153, 0.1);
        }

        .control-btn.primary {
            background: var(--matryoshka-gradient);
            border: none;
            color: white;
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        /* Metrics */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        .metric-card {
            background: var(--bg-elevated);
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
        }

        .metric-value {
            font-size: 1.4rem;
            font-weight: 800;
            font-family: 'JetBrains Mono', monospace;
            background: var(--matryoshka-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .metric-label {
            font-size: 0.6rem;
            color: var(--text-muted);
            text-transform: uppercase;
            margin-top: 0.2rem;
        }

        /* Benchmark Comparison */
        .benchmark-section {
            background: var(--bg-elevated);
            border-radius: 12px;
            padding: 1rem;
        }

        .benchmark-title {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .benchmark-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .benchmark-name {
            width: 100px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .benchmark-bar {
            flex: 1;
            height: 20px;
            background: var(--bg-dark);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .benchmark-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s;
        }

        .benchmark-fill.matryoshka { background: var(--matryoshka-gradient); }
        .benchmark-fill.openai { background: linear-gradient(90deg, #74aa9c, #10a37f); }
        .benchmark-fill.cohere { background: linear-gradient(90deg, #d97706, #f59e0b); }

        .benchmark-value {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.65rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        /* Storage Savings */
        .storage-section {
            background: var(--bg-elevated);
            border-radius: 12px;
            padding: 1rem;
        }

        .storage-comparison {
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            height: 120px;
            padding: 1rem 0;
        }

        .storage-bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .storage-bar {
            width: 50px;
            background: var(--bg-dark);
            border-radius: 6px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            transition: height 0.5s;
        }

        .storage-bar.full { height: 100px; background: var(--danger); }
        .storage-bar.compressed { height: 25px; background: var(--success); }

        .storage-label {
            font-size: 0.65rem;
            color: var(--text-muted);
            text-align: center;
        }

        .storage-size {
            font-size: 0.75rem;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            color: white;
            padding: 0.2rem;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.85rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 15px 50px rgba(0,0,0,0.6);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

        .processing-overlay {
            position: fixed;
            inset: 0;
            background: rgba(9, 9, 11, 0.97);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .processing-overlay.active { display: flex; }

        .embed-animation {
            width: 120px;
            height: 120px;
            position: relative;
            margin-bottom: 2rem;
        }

        .embed-ring {
            position: absolute;
            border-radius: 50%;
            border: 3px solid transparent;
            animation: embedSpin 2s linear infinite;
        }

        .embed-ring:nth-child(1) {
            width: 120px;
            height: 120px;
            top: 0;
            left: 0;
            border-top-color: var(--primary);
            animation-duration: 1.5s;
        }

        .embed-ring:nth-child(2) {
            width: 90px;
            height: 90px;
            top: 15px;
            left: 15px;
            border-right-color: var(--secondary);
            animation-duration: 2s;
            animation-direction: reverse;
        }

        .embed-ring:nth-child(3) {
            width: 60px;
            height: 60px;
            top: 30px;
            left: 30px;
            border-bottom-color: var(--accent);
            animation-duration: 1s;
        }

        .embed-ring:nth-child(4) {
            width: 30px;
            height: 30px;
            top: 45px;
            left: 45px;
            border-left-color: var(--tertiary);
            animation-duration: 0.75s;
            animation-direction: reverse;
        }

        @keyframes embedSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .processing-text {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .processing-stage {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
        }

        .processing-progress {
            width: 280px;
            height: 5px;
            background: var(--bg-elevated);
            border-radius: 3px;
            overflow: hidden;
        }

        .processing-bar {
            height: 100%;
            background: var(--matryoshka-gradient);
            width: 0%;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">ü™Ü</div>
                <div>
                    <div class="logo-text">MatryoshkaIndex</div>
                    <div class="logo-subtitle">Linkup Research Demo</div>
                </div>
            </div>
            <div class="header-badges">
                <span class="badge live">‚óè Indexing</span>
                <span class="badge">Matryoshka Embeddings</span>
                <span class="badge">HNSW + Vespa</span>
                <span class="badge">32x Compression</span>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="hero">
            <h1>ü™Ü Billion-Scale Multi-Resolution Embeddings</h1>
            <p>Domain-specific Matryoshka embeddings with coarse-to-fine retrieval ‚Äî 32x storage reduction with less than 3% accuracy loss</p>
        </div>

        <div class="workspace">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üîç Multi-Resolution Search</h3>
                    <span style="font-size: 0.7rem; color: var(--text-muted); font-family: 'JetBrains Mono';">Index: 1.2B documents</span>
                </div>
                <div class="card-body">
                    <div class="matryoshka-viz">
                        <div class="matryoshka-dolls">
                            <div class="doll d1536" onclick="selectDimension(1536)">
                                <div class="doll-label">1536d</div>
                            </div>
                            <div class="doll d768" onclick="selectDimension(768)">
                                <div class="doll-label">768d</div>
                            </div>
                            <div class="doll d256" onclick="selectDimension(256)">
                                <div class="doll-label">256d</div>
                            </div>
                            <div class="doll d64" onclick="selectDimension(64)">
                                <div class="doll-label">64d</div>
                            </div>
                        </div>
                    </div>

                    <div class="dimension-selector">
                        <button class="dim-btn d64" onclick="selectDimension(64)">64d Binary</button>
                        <button class="dim-btn d256" onclick="selectDimension(256)">256d Int8</button>
                        <button class="dim-btn d768" onclick="selectDimension(768)">768d Float16</button>
                        <button class="dim-btn active" onclick="selectDimension(1536)">1536d Float32</button>
                    </div>

                    <div class="search-section">
                        <div class="search-input-container">
                            <input type="text" class="search-input" id="searchInput" placeholder="Enter your search query..." value="GDPR compliance for AI search APIs">
                            <button class="search-btn" onclick="performSearch()">üîç Search</button>
                        </div>
                    </div>

                    <div class="phases-container">
                        <div class="phase-card phase1">
                            <div class="phase-header">
                                <span class="phase-title">Phase 1: Coarse</span>
                                <span class="phase-time" id="phase1Time">‚Äî</span>
                            </div>
                            <div class="phase-stats">
                                <div class="phase-stat">
                                    <div class="phase-stat-value" id="phase1Candidates">‚Äî</div>
                                    <div class="phase-stat-label">Candidates</div>
                                </div>
                                <div class="phase-stat">
                                    <div class="phase-stat-value" id="phase1Dim">64d</div>
                                    <div class="phase-stat-label">Binary</div>
                                </div>
                            </div>
                        </div>
                        <div class="phase-card phase2">
                            <div class="phase-header">
                                <span class="phase-title">Phase 2: Refine</span>
                                <span class="phase-time" id="phase2Time">‚Äî</span>
                            </div>
                            <div class="phase-stats">
                                <div class="phase-stat">
                                    <div class="phase-stat-value" id="phase2Candidates">‚Äî</div>
                                    <div class="phase-stat-label">Re-ranked</div>
                                </div>
                                <div class="phase-stat">
                                    <div class="phase-stat-value" id="phase2Dim">256d</div>
                                    <div class="phase-stat-label">Int8</div>
                                </div>
                            </div>
                        </div>
                        <div class="phase-card phase3">
                            <div class="phase-header">
                                <span class="phase-title">Phase 3: Final</span>
                                <span class="phase-time" id="phase3Time">‚Äî</span>
                            </div>
                            <div class="phase-stats">
                                <div class="phase-stat">
                                    <div class="phase-stat-value" id="phase3Candidates">‚Äî</div>
                                    <div class="phase-stat-label">Results</div>
                                </div>
                                <div class="phase-stat">
                                    <div class="phase-stat-value" id="phase3Dim">1536d</div>
                                    <div class="phase-stat-label">Float32</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="results-section">
                        <div class="results-header">
                            <span class="results-title">üéØ Search Results</span>
                            <span class="results-count" id="resultsCount">0 results</span>
                        </div>
                        <div id="resultsList">
                            <div style="color: var(--text-muted); font-size: 0.8rem; text-align: center; padding: 1.5rem;">
                                Enter a query and click Search
                            </div>
                        </div>
                    </div>

                    <div class="controls">
                        <button class="control-btn primary" onclick="performSearch()">üîç Search</button>
                        <button class="control-btn" onclick="runBenchmark()">üìä Run Benchmark</button>
                        <button class="control-btn" onclick="exportIndex()">üì¶ Export Index</button>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìà Performance Metrics</h3>
                    </div>
                    <div class="card-body">
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <div class="metric-value" id="totalLatency">0ms</div>
                                <div class="metric-label">Total Latency</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="recall">0%</div>
                                <div class="metric-label">Recall@10</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="qps">0</div>
                                <div class="metric-label">QPS</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value" id="compression">32x</div>
                                <div class="metric-label">Compression</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üèÜ Embedding Comparison</h3>
                    </div>
                    <div class="card-body">
                        <div class="benchmark-section">
                            <div class="benchmark-title">MTEB Retrieval Score</div>
                            <div class="benchmark-item">
                                <span class="benchmark-name">MatryoshkaIndex</span>
                                <div class="benchmark-bar">
                                    <div class="benchmark-fill matryoshka" id="matryoshkaBar" style="width: 0%">
                                        <span class="benchmark-value" id="matryoshkaScore">0%</span>
                                    </div>
                                </div>
                            </div>
                            <div class="benchmark-item">
                                <span class="benchmark-name">text-embed-3</span>
                                <div class="benchmark-bar">
                                    <div class="benchmark-fill openai" id="openaiBar" style="width: 0%">
                                        <span class="benchmark-value" id="openaiScore">0%</span>
                                    </div>
                                </div>
                            </div>
                            <div class="benchmark-item">
                                <span class="benchmark-name">Cohere v3</span>
                                <div class="benchmark-bar">
                                    <div class="benchmark-fill cohere" id="cohereBar" style="width: 0%">
                                        <span class="benchmark-value" id="cohereScore">0%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üíæ Storage Savings</h3>
                    </div>
                    <div class="card-body">
                        <div class="storage-section">
                            <div class="storage-comparison">
                                <div class="storage-bar-container">
                                    <div class="storage-bar full">
                                        <span class="storage-size">6.1TB</span>
                                    </div>
                                    <span class="storage-label">Float32<br>1536d</span>
                                </div>
                                <div class="storage-bar-container">
                                    <div class="storage-bar compressed">
                                        <span class="storage-size">190GB</span>
                                    </div>
                                    <span class="storage-label">Matryoshka<br>Multi-res</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">‚öôÔ∏è Index Configuration</h3>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; gap: 0.5rem;">
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                                <span style="color: var(--text-secondary);">HNSW M</span>
                                <span style="font-family: 'JetBrains Mono'; color: var(--primary);">16</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                                <span style="color: var(--text-secondary);">ef_construction</span>
                                <span style="font-family: 'JetBrains Mono'; color: var(--primary);">200</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                                <span style="color: var(--text-secondary);">ef_search</span>
                                <span style="font-family: 'JetBrains Mono'; color: var(--primary);">100</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                                <span style="color: var(--text-secondary);">Quantization</span>
                                <span style="font-family: 'JetBrains Mono'; color: var(--primary);">Binary + Int8</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.8rem;">
                                <span style="color: var(--text-secondary);">Documents</span>
                                <span style="font-family: 'JetBrains Mono'; color: var(--primary);">1.2B</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div class="processing-overlay" id="processingOverlay">
        <div class="embed-animation">
            <div class="embed-ring"></div>
            <div class="embed-ring"></div>
            <div class="embed-ring"></div>
            <div class="embed-ring"></div>
        </div>
        <div class="processing-text">Building Matryoshka Index...</div>
        <div class="processing-stage" id="processingStage">Loading embeddings...</div>
        <div class="processing-progress">
            <div class="processing-bar" id="processingBar"></div>
        </div>
    </div>

    <div class="toast" id="toast">
        <span class="toast-icon">‚úÖ</span>
        <div class="toast-content">
            <div class="toast-title" id="toastTitle">Success!</div>
            <div class="toast-message" id="toastMessage">Search completed</div>
        </div>
    </div>

    <script>
        let currentDimension = 1536;
        let searchCount = 0;

        const documents = [
            { title: "EU GDPR Requirements for AI-Powered Search Systems", domain: "gdpr.eu", score: 0.96 },
            { title: "Implementing Privacy-First Search APIs: A Technical Guide", domain: "docs.linkup.so", score: 0.94 },
            { title: "Data Protection Impact Assessments for RAG Systems", domain: "ico.org.uk", score: 0.91 },
            { title: "Cross-Border Data Transfer Rules for AI Services", domain: "ec.europa.eu", score: 0.89 },
            { title: "Privacy by Design in Vector Search Architectures", domain: "arxiv.org", score: 0.87 },
            { title: "GDPR Article 22: Automated Decision Making in Search", domain: "gdpr-info.eu", score: 0.85 },
            { title: "Building Compliant AI Search: Best Practices", domain: "anthropic.com", score: 0.83 },
            { title: "Data Retention Policies for Search Indices", domain: "docs.vespa.ai", score: 0.81 },
        ];

        function init() {
            animateBenchmarks();
        }

        function selectDimension(dim) {
            currentDimension = dim;
            
            document.querySelectorAll('.dim-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.includes(dim + 'd') || 
                    (dim === 64 && btn.textContent.includes('64d')) ||
                    (dim === 256 && btn.textContent.includes('256d')) ||
                    (dim === 768 && btn.textContent.includes('768d')) ||
                    (dim === 1536 && btn.textContent.includes('1536d'))) {
                    btn.classList.add('active');
                }
            });

            // Update phase display based on dimension
            const phases = {
                64: { p1: '64d', p2: '64d', p3: '64d' },
                256: { p1: '64d', p2: '256d', p3: '256d' },
                768: { p1: '64d', p2: '256d', p3: '768d' },
                1536: { p1: '64d', p2: '256d', p3: '1536d' }
            };

            document.getElementById('phase3Dim').textContent = phases[dim].p3;
            
            showToast('Dimension Selected', `Using ${dim}d embeddings for search`);
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value;
            if (!query) return;

            searchCount++;
            
            // Simulate phased search
            document.getElementById('phase1Candidates').textContent = '‚Äî';
            document.getElementById('phase2Candidates').textContent = '‚Äî';
            document.getElementById('phase3Candidates').textContent = '‚Äî';
            document.getElementById('phase1Time').textContent = '‚Äî';
            document.getElementById('phase2Time').textContent = '‚Äî';
            document.getElementById('phase3Time').textContent = '‚Äî';

            // Phase 1
            setTimeout(() => {
                document.getElementById('phase1Candidates').textContent = '10,000';
                document.getElementById('phase1Time').textContent = '12ms';
            }, 200);

            // Phase 2
            setTimeout(() => {
                document.getElementById('phase2Candidates').textContent = '500';
                document.getElementById('phase2Time').textContent = '28ms';
            }, 500);

            // Phase 3
            setTimeout(() => {
                document.getElementById('phase3Candidates').textContent = '30';
                document.getElementById('phase3Time').textContent = '45ms';
                
                // Update metrics
                const totalLatency = 12 + 28 + 45;
                document.getElementById('totalLatency').textContent = totalLatency + 'ms';
                document.getElementById('recall').textContent = '97.2%';
                document.getElementById('qps').textContent = Math.floor(1000 / totalLatency * 10);
                
                // Render results
                renderResults();
            }, 800);
        }

        function renderResults() {
            const container = document.getElementById('resultsList');
            const shuffled = [...documents].sort(() => Math.random() * 0.3 - 0.15);
            
            container.innerHTML = shuffled.slice(0, 6).map((doc, i) => {
                const cosine = (doc.score - Math.random() * 0.05).toFixed(3);
                const bm25 = (Math.random() * 20 + 10).toFixed(1);
                return `
                    <div class="result-item">
                        <div class="result-rank">${i + 1}</div>
                        <div class="result-content">
                            <div class="result-title">${doc.title}</div>
                            <div class="result-meta">${doc.domain} ‚Ä¢ ${currentDimension}d embedding</div>
                        </div>
                        <div class="result-scores">
                            <span class="result-score cosine">${cosine}</span>
                            <span class="result-score bm25">${bm25}</span>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('resultsCount').textContent = '6 results';
            showToast('Search Complete', `Found 6 results in ${85}ms`);
        }

        function animateBenchmarks() {
            setTimeout(() => {
                document.getElementById('matryoshkaBar').style.width = '94%';
                document.getElementById('matryoshkaScore').textContent = '94.2%';
            }, 300);
            setTimeout(() => {
                document.getElementById('openaiBar').style.width = '92%';
                document.getElementById('openaiScore').textContent = '92.1%';
            }, 500);
            setTimeout(() => {
                document.getElementById('cohereBar').style.width = '89%';
                document.getElementById('cohereScore').textContent = '89.4%';
            }, 700);
        }

        function runBenchmark() {
            const overlay = document.getElementById('processingOverlay');
            const bar = document.getElementById('processingBar');
            const stage = document.getElementById('processingStage');

            overlay.classList.add('active');

            const stages = [
                'Loading test queries...',
                'Computing embeddings at 64d...',
                'Computing embeddings at 256d...',
                'Computing embeddings at 768d...',
                'Computing embeddings at 1536d...',
                'Running MTEB evaluation...',
                'Calculating recall metrics...',
                'Finalizing benchmark...'
            ];

            let progress = 0;
            let stageIndex = 0;

            const interval = setInterval(() => {
                progress += Math.random() * 15 + 5;
                if (progress > 100) progress = 100;
                bar.style.width = progress + '%';

                const newStage = Math.floor((progress / 100) * stages.length);
                if (newStage !== stageIndex && newStage < stages.length) {
                    stageIndex = newStage;
                    stage.textContent = stages[stageIndex];
                }

                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        overlay.classList.remove('active');
                        animateBenchmarks();
                        showToast('Benchmark Complete', 'MTEB evaluation finished');
                    }, 300);
                }
            }, 100);
        }

        function exportIndex() {
            showToast('üì¶ Index Exported', 'matryoshka_index_1.2B.vespa');
        }

        function showToast(title, message) {
            const toast = document.getElementById('toast');
            document.getElementById('toastTitle').textContent = title;
            document.getElementById('toastMessage').textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        init();
    </script>
</body>
</html>
